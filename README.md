# FuckinHabits (Habits Tracker Mini App)

**FuckinHabits** — это современный, минималистичный и мощный трекер привычек, интегрированный прямо в Telegram. Это не просто список галочек, а полноценный личный ассистент с искусственным интеллектом, аналитикой и глубокой интеграцией с Google Calendar.

Проект создан с фокусом на UX, скорость работы и удобство использования в формате Telegram Mini App.

## Ключевые возможности

### AI-Ассистент (GLM-4 / Claude)
Встроенный умный бот понимает естественный язык и управляет вашим расписанием:
- **Планирование:** "Встреча с командой завтра в 14:00" — событие моментально летит в Google Календарь.
- **Интерактивный дайджест:** Каждое утро (в 09:00) приходит список дел с кнопками. Нажал — отметил выполненным.
- **Умное редактирование:** "Перенеси микру на послезавтра" — бот поймет, о какой задаче речь, и сдвинет её.
- **Отчетность:** "Прорешал тесты" — задача автоматически отмечается выполненной (V) в календаре.
- **Дневник:** Все мысли, не похожие на задачи, сохраняются в личный дневник дня.

### Telegram Mini App
Полноценное веб-приложение внутри Telegram:
- **Трекер привычек:** Создавайте, сортируйте и отмечайте привычки.
- **Оценка дня:** Оценивайте эффективность и социальную активность (1-5) каждый день.
- **Тепловая карта (Heatmap):** Визуализируйте свой прогресс (как на GitHub) по разным метрикам: привычки, оценки, отдельные задачи.
- **Статистика:** Аналитика серий (streaks), средние показатели за месяц/год.
- **Цели на год:** Фокусируйтесь на главном.
- **Оффлайн-режим:** Оптимистичные обновления интерфейса (optimistic UI) для мгновенной реакции.

### Интеграции и Технологии
- **Google Calendar:** Двусторонняя синхронизация задач.
- **Supabase:** Надежная база данных (PostgreSQL) для хранения привычек, логов и пользователей.
- **Vercel:** Серверлес-деплой, Cron-задачи для уведомлений.
- **Zhipu AI (GLM-4) / Anthropic:** Мощные LLM для обработки естественного языка.

## Технический стек

Проект построен на современном стеке технологий, обеспечивающем высокую производительность и типизацию.

- **Frontend:** [Next.js 15](https://nextjs.org/) (App Router), [React 19](https://react.dev/), [Tailwind CSS](https://tailwindcss.com/).
- **Backend:** Next.js Server Actions / API Routes.
- **Database:** [Supabase](https://supabase.com/) (PostgreSQL).
- **Bot Framework:** [grammY](https://grammy.dev/).
- **AI/LLM:** Anthropic SDK (интеграция с Z.ai / GLM-4).
- **Deployment:** Vercel.

## Установка и запуск

### Предварительные требования
- Node.js 20+
- Аккаунт Supabase
- Аккаунт Google Cloud (для Calendar API)
- API Key от Zhipu AI (или совместимого провайдера)
- Telegram Bot Token

### 1. Клонирование репозитория
```bash
git clone https://github.com/your-username/fuckin-habits.git
cd fuckin-habits
npm install
```

### 2. Настройка переменных окружения
Создайте файл `.env` на основе `.env.example`:

```env
# Telegram
TELEGRAM_BOT_TOKEN=ваш_токен
WEBAPP_URL=https://ваш-домен.vercel.app
TELEGRAM_USER_ID=ваш_id_для_тестов
TELEGRAM_WEBHOOK_SECRET=длинный_секрет_для_webhook
TELEGRAM_BYPASS_AUTH=false

# Supabase
SUPABASE_URL=...
SUPABASE_SERVICE_ROLE_KEY=...

# AI & Calendar
GLM_API_KEY=ваш_ключ_z_ai
GLM_MODEL=glm-4.7
GOOGLE_CALENDAR_ID=ваш_email@gmail.com
GOOGLE_SERVICE_ACCOUNT_JSON={...json_сервисного_аккаунта...}

# Security
CRON_SECRET=придумайте_сложный_пароль
```

### 3. Настройка базы данных
Выполните SQL-миграции из папки `supabase/migrations` в SQL Editor вашей панели Supabase. Это создаст необходимые таблицы (`users`, `habits`, `daily_logs`, `year_goals` и др.).

### 4. Запуск локально
```bash
npm run dev
```
Бот будет доступен через Webhook (для локальной разработки используйте туннель, например, `ngrok`).

### 5. Деплой на Vercel
Проект оптимизирован для Vercel. Просто импортируйте репозиторий и добавьте переменные окружения.
Не забудьте настроить **Cron Jobs** в `vercel.json` для ежедневных уведомлений.

## Структура проекта

```
src/
├── app/                 # Next.js App Router
│   ├── api/             # API Routes (Webhook, Cron, CRUD)
│   └── page.tsx         # Главная страница Mini App
├── components/          # React компоненты (UI kit)
├── lib/
│   ├── agent/           # AI-агенты (Классификатор, Удаление, Модификация)
│   ├── db/              # Работа с БД
│   ├── bot.ts           # Логика Telegram бота
│   └── llm.ts           # Настройка LLM клиента
└── ...
```

## Вклад в развитие

Pull Requests приветствуются! Если у вас есть идеи по улучшению AI-агента или новые фичи для трекера — смело предлагайте.
